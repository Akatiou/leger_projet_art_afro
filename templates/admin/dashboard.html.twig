{% extends "base.html.twig" %}

{% block title %}Accueil Espace Administrateur!
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/lux/bootstrap.min.css" crossorigin="anonymous">
{% endblock %}

{% block body %}
	<section class="dashboard">
		<div class="container-fluid">
			<h1 class="text-center">Tableau de bord de la partie administrateur</h1>
			<div class="row ">
				<div class="col">
					<div class="card text-white bg-primary mb-3 text-center my-5 shadow">
						<div class="card-body">
							<div class="row align-items-center">
								<div class="col-4">
									<i class="fas fa-users fa-3x"></i>
								</div>
								<div class="col-8">
									<h4 class="card-title">Nombre d'tilisateurs inscrits:
										<strong>{{ users | length }}</strong>
									</h4>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col">
					<div class="card text-white bg-dark mb-3 text-center my-5 shadow">
						<div class="card-body">
							<div class="row align-items-center">
								<div class="col-4">
									<i class="fas fa-shopping-bag fa-3x"></i>
								</div>
								<div class="col-8">
									<h4 class="card-title">Nombres de Produits:
										<strong>{{product | length }}</strong>
									</h4>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col">
					<div class="card text-white bg-warning mb-3 text-center my-5 shadow">
						<div class="card-body">
							<div class="row align-items-center">
								<div class="col-4">
									<i class="fas fa-shopping-cart fa-3x"></i>
								</div>
								<div class="col-8">
									<h4 class="card-title">Nombres de Commandes:
										<strong>{{purchases | length }}</strong>
									</h4>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div class="alert alert-info">
						<h2 class="alert-heading my-3">Les 10 produits les  plus chers</h2>
						<table class="table table-hover">
							<thead>
								<tr>
									<th>Nom du produit</th>
									<th>Catégorie</th>
									<th>Prix</th>
								</tr>
							</thead>
							<tbody>
								{% for product in products %}
									<tr>
										<td>
											<a href="{{ path('admin_product_show', {'id': product.id}) }}">{{ product.name}}</a>
										</td>
										<td>
											{{ product.category.name }}
										</td>
										<td class="text-center">
											{{ product.price | amount }}
										</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
				<div class="col">
					<div class="alert alert-warning">
						<h2 class="alert-heading my-3">Les derniers produits ajoutés à la boutique</h2>
						<table class="table table-hover">
							<thead>
								<tr>
									<th>Nom du produit</th>
									<th>Catégorie</th>
									<th>Date</th>
								</tr>
							</thead>
							<tbody>
								{% for product in lastproducts %}
									<tr>
										<td>
											<a href="{{ path('admin_product_show', {'id': product.id}) }}">{{ product.name}}</a>
										</td>
										<td>
											{{ product.category.name }}
										</td>
										<td class="text-center">
											{{ product.createdAt | date("d/m/Y") }}
										</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>

				</div>
			</div>
		</div>
	</section>


{% endblock %}
